<p id="notice"><%= notice %></p>
<div id="project_info">

<a href="#" id="slick-toggle">Make a Project Update</a>
<div id="slickbox">
  <%= form_for([@project, @project.project_updates.build]) do |f| %>
  <div class="field">
    <%= f.text_field :title, :width => 30 %><br>
    <%= f.text_area :content, :size => "35x5" %>
  </div>
  <%= f.hidden_field :user_id, {:value => current_user.id} %>
  <div class="action">
    <%= f.submit 'Post' %>
  </div>
  <% end %>
</div>
</div>

<h1><%= @project.name %></h1>

<p>
  <b>Description:</b><br>
  <%= @project.description %>
</p>
  <b>Members:</b><br>
  <% @owners.each do |assignment| %>
    <i><%= link_to User.find(assignment.user_id).username, user_path(User.find(assignment.user_id)) %></i><br>
  <% end %>
  <% (@project.users - @project.owners).each do |user| %>
    <% user = user.becomes(User) %> 
    <%= link_to user.username, user_path(user) %> <br>
  <% end %>
</p>

<div style="width: 900px;">



<% unless @project.project_updates.length <= 1 then %>
  <h2>Project Blog</h2>
    <% @project.project_updates.reverse.each do |update| %>
    
    <% if update.user_id then %>
    <div style="padding-left: 20px; padding-bottom: 40px;">
      <h3><%= update.title %></h3><i>by 
      
      <% if update.user_id then %>
	    <b> <%= link_to update.user.username, user_path(update.user) %> </b> wrote:
	    <% end %> @ 
	    
	    <% if update.created_at then %>
	    <i><%= update.created_at.getlocal.strftime("%m/%d/%Y @ %H:%M") %></i>
	    <% else %>
	    <%= update.created_at %>
	    <% end %>
	    
	    </i><br><br>
      <div style="padding-left: 20px;"><%= update.content %></div>
    </div>
    <% end %>
    <% end %>
<% end %>
</div>

<br />
<br />

<% if current_user.owns? @project or current_user.is_super_admin? then %>
  <%= link_to 'Edit', edit_project_path(@project) %> |
<% end %>
<%= link_to 'Back', projects_path %>
